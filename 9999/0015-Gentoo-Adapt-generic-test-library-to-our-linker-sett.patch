From 782c17148cc2a663778c03bb6f78412e79593df4 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20K=2E=20H=C3=BCttel?= <dilfridge@gentoo.org>
Date: Sun, 10 May 2020 20:24:33 +0300
Subject: [PATCH 15/16] Gentoo: Adapt generic test library to our linker
 settings

---
 binutils/testsuite/lib/binutils-common.exp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/binutils/testsuite/lib/binutils-common.exp b/binutils/testsuite/lib/binutils-common.exp
index b9e3c6d817..bb4ef987b3 100644
--- a/binutils/testsuite/lib/binutils-common.exp
+++ b/binutils/testsuite/lib/binutils-common.exp
@@ -1125,7 +1125,7 @@ proc run_dump_test { name {extra_options {}} } {
 
             # Add -L$srcdir/$subdir so that the linker command can use
             # linker scripts in the source directory.
-            set cmd "$LD $ld_extra_opt $LDFLAGS -L$srcdir/$subdir \
+            set cmd "$LD --hash-style=sysv --no-warn-shared-textrel $ld_extra_opt $LDFLAGS -L$srcdir/$subdir \
 		   $opts(ld) -o $objfile $objfiles $opts(ld_after_inputfiles)"
 
             # If needed then check for, or add a -Map option.
-- 
2.26.2

